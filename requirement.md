# 需求文档｜Requirements Document

## 项目名称
zMusic-Pal: 小巧优雅的音乐工具

## 一、目标

### 项目定位
- 一页式轻量级 Web 应用，支持音乐基础功能查询和 AI 辅助创作。

### 核心功能
1. 查调 / Key Finder
2. 查和弦 / Chord Finder
3. AI 伙伴 / AI Pal
4. 联系 / Contact（右上角按钮）
5. GitHub（右上角按钮）

### 设计要求
- 页面布局清晰，所有功能模块在一页中按顺序排列。
- 响应式设计，适配移动端和桌面端，提升用户体验。
- 右上角按钮逻辑：
  - 初始页面加载时显示，随页面滚动后隐藏，保持主要功能区的整洁性。

## 二、功能需求

### 1. 查调 / Key Finder
#### 描述
用户通过下拉菜单选择一个根音和调式，实时显示对应的音阶和常用三和弦。

#### 输入
- 根音 / Root Note：
  C, Db, D, Eb, E, F, F#, G, Ab, A, Bb, B
- 调式 / Scale：
  大调 / Major，自然小调 / Natural Minor，和声小调 / Harmonic Minor，旋律小调 / Melodic Minor

#### 输出示例
音阶 / Scale:  
F G A Bb C D E

常用三和弦 / Common Triads:  
I     F      F - A - C  
ii    Gm     G - Bb - D  
iii   Am     A - C - E  
IV    Bb     Bb - D - F  
V     C      C - E - G  
vi    Dm     D - F - A  

### 2. 查和弦 / Chord Finder
#### 描述
用户选择一个根音和和弦类型，显示和弦的组成音。

#### 输入
- 根音 / Root Note：与查调相同
- 和弦类型 / Chord Type：
  大三和弦 / Major，小三和弦 / Minor，减三和弦 / Dim，增三和弦 / Aug

#### 输出示例
和弦 / Chord: C Major  
组成音：C - E - G  

### 3. AI 伙伴 / AI Pal
#### 描述
用户输入自由文本问题，AI 返回动态答案。

#### 输入
- 自由文本输入框

#### 输出示例
用户：C Major 的常用和弦是什么？  
AI：C Major 的常用和弦是：I (C), ii (Dm), iii (Em), IV (F), V (G), vi (Am)  

### 4. 联系 / Contact（右上角按钮）
#### 描述
用户点击按钮，可以提交建议、问题反馈或联系开发者。

#### 实现方式
- 按钮位于右上角，初始页面加载时显示。
- 随用户滚动页面，按钮隐藏，避免干扰主要功能区的体验。
- 点击跳转到表单页面或邮件链接。

#### 表单内容
- 用户名（可选）
- 联系方式（可选）
- 反馈内容（必填）

### 5. GitHub（右上角按钮）
#### 描述
用户点击按钮，可以跳转到 GitHub 项目主页，了解项目详情、提交问题或贡献代码。

#### 实现方式
- 按钮位于右上角，初始页面加载时显示。
- 随用户滚动页面，按钮隐藏，保持界面整洁。

## 三、界面设计

### 1. 页面布局

```
┌─────────────────────────────────────────────────────┐
│          zMusic-Pal                                 │
│  一个小巧优雅的音乐工具          [联系] [GitHub]      │
└─────────────────────────────────────────────────────┘

[ 查调 / Key Finder ]
┌────────────────────────────────────────────────┐
│  根音 / Root Note: [C]                        │
│  调式 / Scale: [Major]                        │
├────────────────────────────────────────────────┤
│  音阶 / Scale:                                │
│  F G A Bb C D E                               │
├────────────────────────────────────────────────┤
│  常用三和弦 / Common Triads:                  │
│  I     F      F - A - C                       │
│  ii    Gm     G - Bb - D                      │
│  iii   Am     A - C - E                       │
│  IV    Bb     Bb - D - F                      │
│  V     C      C - E - G                       │
│  vi    Dm     D - F - A                       │
└────────────────────────────────────────────────┘

[ 查和弦 / Chord Finder ]
┌────────────────────────────────────────────────┐
│  根音 / Root Note: [C]                        │
│  和弦类型 / Chord Type: [Major]               │
├────────────────────────────────────────────────┤
│  和弦 / Chord: C Major                        │
│  组成音: C - E - G                            │
└────────────────────────────────────────────────┘

[ AI 伙伴 / AI Pal ]
┌────────────────────────────────────────────────┐
│  输入问题 / Ask a question:                   │
│  [ 请输入您的问题...... ]                     │
├────────────────────────────────────────────────┤
│  输出回答 / AI Response:                      │
│  C Major 的常用和弦是：                       │
│  I (C), ii (Dm), iii (Em), IV (F), V (G),    │
│  vi (Am)                                      │
└────────────────────────────────────────────────┘
```

### 模块特点
- 各模块按顺序排列，动态更新结果在模块内显示。
- 右上角按钮在页面加载时可见，滚动后隐藏。

### 2. 移动端设计
- 页面宽度自适应，布局优先适配移动端。
- 功能模块支持滚动显示，避免内容超出屏幕长度。
- 右上角按钮在移动端以同样逻辑隐藏，避免影响有限屏幕空间。

## 四、技术要求

### 前端
- React.js，支持响应式设计。
- 动态显示逻辑：监听页面滚动事件控制右上角按钮显示/隐藏。

### 后端
- FastAPI，用于处理 DeepSeek API 调用。

### 数据
- 音阶和和弦逻辑初期硬编码在前端（如 JSON 文件）。
- 可选扩展：后端提供静态 API 返回音阶和和弦数据。

## 五、测试需求

### 1. 功能测试
- 验证各功能模块的输入输出是否符合预期：
  - 查调和查和弦：测试不同输入组合的结果正确性。
  - AI 伙伴：确认 AI 返回的答案是否准确。
  - 联系和 GitHub 按钮：测试跳转功能是否正常。

### 2. 浏览器兼容性
- 测试以下浏览器的兼容性：
  - Google Chrome、Mozilla Firefox、Microsoft Edge、Safari、iOS Safari、Android Chrome。

### 3. 性能测试
- 页面加载时间 < 2 秒。
- 动态结果响应时间 < 500 毫秒。

### 4. 错误处理
- 验证输入错误时是否有友好提示。
- 确保 API 请求失败时有合理的错误信息。

## 六、特别说明

### 国际化支持
- 中英文并列显示（如 "音阶 / Scale"）。

### 后续扩展
- 增加更多调式（如五声音阶）。
- 支持更多和弦类型（如七和弦）。

### 开发优先级
- 优先实现查调和查和弦功能。
- AI 伙伴、联系和 GitHub 入口为辅助模块，但需保持基础可用性。

## Changelog

- 20250121 zoejane fix markdown syntax
- 20250117 zoejane init